<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>Advanced Earth Observation｜9.Accuracy Assessment &mdash; Xinyi He</title><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/css/components/collection.css"><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/css/globals/common.css"><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/css/posts/index.css"><link rel="stylesheet" href="https://buliangzhang24.github.io/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://mazhuang.org/rouge-themes/dist/github.css"><link rel="canonical" href="https://buliangzhang24.github.io/2024/01/24/Advanced-Earth-Observation-9.Accuracy-Assessment/"><link rel="alternate" type="application/atom+xml" title="Xinyi He" href="https://buliangzhang24.github.io/feed.xml"><link rel="shortcut icon" href="https://buliangzhang24.github.io/favicon.ico"><meta property="og:title" content="Advanced Earth Observation｜9.Accuracy Assessment"><meta name="keywords" content="Accuracy Assessment"><meta name="og:keywords" content="Accuracy Assessment"><meta name="description" content="Exercise基于分层抽样的估计地图精度，估计面积和置信区间1. Accuracy estimation based on sample counting根据样本计数计算简单的混淆矩阵和准确性估计。如果使用简单随机抽样，基于该方法的地图精度计算是正确的。换句话说，所有样本单元被纳入样本的概率相同2. Area weighted accuracy estimation for stratified samplingWhy is converting the map to an equal area projection a necessary step?等积投影An accuracy assessment which includes area weights and inclusion probabilities based on the size of the surface, would be more accurate if the area size is preserved."><meta name="og:description" content="Exercise基于分层抽样的估计地图精度，估计面积和置信区间1. Accuracy estimation based on sample counting根据样本计数计算简单的混淆矩阵和准确性估计。如果使用简单随机抽样，基于该方法的地图精度计算是正确的。换句话说，所有样本单元被纳入样本的概率相同2. Area weighted accuracy estimation for stratified samplingWhy is converting the map to an equal area projection a necessary step?等积投影An accuracy assessment which includes area weights and inclusion probabilities based on the size of the surface, would be more accurate if the area size is preserved."><meta property="og:url" content="https://buliangzhang24.github.io/2024/01/24/Advanced-Earth-Observation-9.Accuracy-Assessment/"><meta property="og:site_name" content="Xinyi He"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2024-01-24"> <script src="https://buliangzhang24.github.io/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://buliangzhang24.github.io/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://buliangzhang24.github.io/" title="Xinyi He"><span class="octicon octicon-mark-github"></span> Xinyi He</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://buliangzhang24.github.io/" class="site-header-nav-item" target="" title="Home">Home</a> <a href="https://buliangzhang24.github.io/categories/" class="site-header-nav-item" target="" title="Categories">Categories</a> <a href="https://buliangzhang24.github.io/archives/" class="mobile-hidden site-header-nav-item" target="" title="Archives">Archives</a> <a href="https://buliangzhang24.github.io/fragments/" class="site-header-nav-item" target="" title="Fragments">Fragments</a> <a href="https://buliangzhang24.github.io/wiki/" class="site-header-nav-item" target="" title="Projects">Projects</a> <a href="https://buliangzhang24.github.io/links/" class="mobile-hidden site-header-nav-item" target="" title="Useful Links">Useful Links</a> <a href="https://buliangzhang24.github.io/about/" class="site-header-nav-item" target="" title="About">About</a> <a class="mobile-hidden" href="https://buliangzhang24.github.io/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="Advanced Earth "><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">Advanced Earth Observation｜9.Accuracy Assessment</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2024/01/24 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://buliangzhang24.github.io/categories/#Advanced Earth Observation" title="Advanced Earth Observation">Advanced Earth Observation</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 8697 字，约 25 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><h1 id="exercise">Exercise</h1><p>基于分层抽样的估计地图精度，估计面积和置信区间</p><h2 id="1-accuracy-estimation-based-on-sample-counting">1. Accuracy estimation based on sample counting</h2><p>根据样本计数计算简单的混淆矩阵和准确性估计。如果使用简单随机抽样，基于该方法的地图精度计算是正确的。换句话说，所有样本单元被纳入样本的概率相同</p><h2 id="2-area-weighted-accuracy-estimation-for-stratified-sampling">2. Area weighted accuracy estimation for stratified sampling</h2><h3 id="why-is-converting-the-map-to-an-equal-area-projection-a-necessary-step等积投影">Why is converting the map to an equal area projection a necessary step?等积投影</h3><p>An accuracy assessment which includes area weights and inclusion probabilities based on the size of the surface, would be more accurate if the area size is preserved.</p><p>The sample inclusion probability refers to the probability that a sample pixels is selected. Inverse of the inclusion probability (i.e sample weights) is used for area weighted accuracy estimation.样本包含概率是指样本像素被选择的概率。包含概率的倒数（即样本权重）用于面积加权精度估计。</p><h3 id="这个面积加权之后的变化为啥变化">这个面积加权之后的变化，为啥变化？</h3><ol><li>Overall accuracy 增加 The overall accuracy of the area weighted increases, because the incorrectly classified pixels in the smaller areas (like class 7) have a lower weight/less influence on the overall accuracy.</li><li>用户精度不变，生产者精度变化The user accuracy calculates inside one class, but the producer’s accuracy calculates among the different classes (both TP and FN). After changing the projection, and including an area weight, the area of different classes is corrected in different levels/proportions, so the producer’s accuracy will change.<h2 id="3-area-estimation-accounting-for-map-errors">3. Area estimation accounting for map errors</h2><h3 id="改正后的区域面积和基于地图估计的区域面积之间比较">改正后的区域面积和基于地图估计的区域面积之间比较</h3><p>The error adjusted includes the pixels which were missed (False Negatives) in the area estimation. If the difference is larger, it means that the denominator of producer’s accuracy (TP + FN) was smaller, so there were fewer false negatives.</p><h2 id="4-automated-calculation-of-accuracy-and-confidence-intervals">4. Automated calculation of accuracy and confidence intervals</h2><h3 id="根据误差调整面积估计和置信区间哪些类在面积估计中具有最高的不确定性">根据误差调整面积估计和置信区间，哪些类在面积估计中具有最高的不确定性？</h3><p>Considering that the first shows the error adjusted estimated area and the second row is the + or –uncertainty range of the area size, the area that could possibly either be or not be in the estimated area size.</p><h2 id="5-sampling-designs-and-sample-allocation">5. Sampling designs and sample allocation</h2><p>当需要验证图谱时，可以使用不同的抽样设计选项来选择验证样本 When focusing on class area estimation, which sampling options is preferred? （当关注类面积估计时，首选哪种采样选项？考虑样本包含概率和每种湿地类型样本点的代表性） 选sample sites per class types. As we saw with the random sampling, the area size of the classes in the field needs to be accounted for to ensure more accurate classification. Comparing them proportional and custom sample size approach, the custom sample includes the pixels for each class.</p><ul><li>Sample inclusion probability: Inclusion probability for classes with smaller area is in this case really low. By manually thresholding the number of pixels for each class the probability of smaller classes to be selected is greater.</li><li>Sample sites per class types: In the proportional sampling option class 9 has 0 pixels selected, and few for classes 2, 3, 6 and 7. As the proportion was based on the area size of the classes, smaller classes did not get enough samples for statistical analysis. With custom sample sizes, the sampling resulted in more samples per class, however, smaller classes are still underrepresented.<h1 id="ppt">PPT</h1><h2 id="research-purpose">Research purpose:</h2><p>creating ==maps== and drawing conclusions 画地图 OR testing and comparing ==models==建模型</p><h2 id="why-map-accuracy-assessment">Why map accuracy assessment?</h2></li><li>remote sensing 的优点： it often allows wall-to-wall coverage of the area under consideration for a measurement variable.</li><li>remote sensing 的缺点： The weakness of remote sensing is that results are never perfect.<h5 id="map-accuracy-assessment-is-an-integral-part-of-remote-sensing-based-monitoring-which-informs-on-the-map-quality">Map accuracy assessment is an integral part of remote sensing based monitoring which informs on the map quality.</h5></li></ul></li><li><strong>positional accuracy</strong>: determines how closely the position of discrete objects shown on a rectified image (map) or in a spatial database agree with the true position on the ground.在地图上和在真实位置的区别</li><li><strong>thematic accuracy</strong>: refers to the non-positional characteristic of a spatial data entity, the so-called attributes属性特征精确度，属性都错了 Positional error 太多就会从1变成2(Positional error can manifest in thematic errors due to positional inaccuracy. )<h2 id="how-to-assess-map-accuracy">How to assess map accuracy</h2><p>validation是: The process of assessing, <strong>by independent means</strong>, the quality of the data products derived from the system outputs.</p><h5 id="步骤">步骤</h5></li><li>high quality in-situ or other reference data</li><li>Representative sample</li><li>More than 30 sample locations</li><li>Update map accuracy assessment if there are new updates.<h2 id="how-to-assess-map-accuracy-using-representative-sample">How to assess map accuracy using representative sample?</h2><ul><li><strong>Sampling design如何选择有代表性的样本?</strong></li><li><strong>Response design如何收集地面真相/参考数据?</strong></li><li><strong>Accuracy estimation如何估计精度?</strong><h3 id="sampling-designs">Sampling designs:</h3></li><li>为了获得unbiased(representative) estimate 无偏估计，我们用probability sampling or random sampling概率抽样和随机抽样</li><li>概率抽样又叫 inclusion probability ：means each sample unit within the area of interest needs to have a probability to be included as a sample unit.</li><li>known and should be non-zero(如果是未知的概率，就是non-probability sampling)</li><li>We cannot say the accuracy number represents the entire mapped area Probability sampling(inclusion probability)»&gt; known»non-zero<h4 id="四种随机抽样方法sampling-selection-scheme">四种随机抽样方法sampling selection scheme：</h4></li><li>简单simple random: Sample sites are randomly selected.</li><li>(different classes)分层stratified random: The study area is divided into strata: Sample sites are randomly selected in each stratum</li><li>系统systematic: Selecting sample sites based on a fixed distance or interval. Usually, the starting selection is random</li><li>块cluster random(all pixels in the block)：Larger blocks are selected randomly and all units within the block is used.<h4 id="which-sampling-selection-scheme-to-choose">Which sampling selection scheme to choose?</h4><p>depends on the objective and requirement</p></li><li>成本If fieldwork is required, the cost aspect is important (cluster and stratified).</li><li>特定阶层用分层Targeting specific classes or regions, stratification can be used.<h4 id="how-many-sample-size">How many sample size?</h4></li><li>Practical consideration (budget and time)</li><li>Statistical consideration: population proportion/population mean<h3 id="response-design">Response design</h3></li><li>指的是如何收集ground truth/reference data</li></ul><ul><li>High quality remote sensing images can sometimes used for reference data collection.高质量的图像做收集参考</li><li>Visual interpretation of different data sources is used to identify the reference label at the sampled locations. 使用不同数据源的可视化解释来识别采样位置的参考标签。 - Clear protocol on what to measure (soil ph, carbon or soil type, land use type) - Good preparation and planning<h4 id="data-sources-for-collecting-the-referencevalidation-data">Data sources for collecting the reference/validation data</h4></li></ul></li><li>Available VHR images (Google, Bing map, and Planet)</li><li>Temporal profiles of NDVI or other indices (Google Earth Engine)</li><li>Multidate images for different seasons (Google earth, Sentinel and Landsat images.</li><li>Geotagged photos or street view (Google earth)<h4 id="reference-data-quality">Reference data quality</h4><ul><li>Reference labels need to be of high quality and represent “truth” (close representation).</li><li>Visual interpretation is not error-free.<h3 id="accuracy-estimation">Accuracy estimation</h3><h4 id="accuracy-metrics">Accuracy metrics</h4></li><li>Discrete (land use type, forest type, forest change) Overall accuracy总体精度 Class accuracy (user’s and producer’s accuracy, F score)类精度</li><li>Continuous variables (biomass, soil organic carbon) Root mean square error (how much the map prediction deviates from the sample)(RMSE) Mean absolute error(MAE) Mean error (ME)<h4 id="discrete">Discrete</h4><p>Confusion Matrix(all inclusion probability) <img src="https://buliangzhang24.github.io/images/posts/3fff594d669cb908a15de56e7cb2f49.png" alt="" /></p></li></ul></li></ol><p>Overall accuracy= TP+TN/(TP+TN+FP+FN) User’s accuracy= TP/(TP+FP) Producer’s accuracy= TP/(TP+FN)</p><p>Producer’s and user’s accuracy are calculated for each class. 有效的条件：This works when all sample points have the same inclusion probability 所以，要是不相等呢</p><h5 id="what-if-the-sample-inclusion-probability-is-not-equal">What if the sample inclusion probability is not equal?</h5><p>（就是分层了Sampling weight (inverse of inclusion probability) is different per sample point.） Create a confusion matrix accounting for the sample/strata weights.但是算法还是一样的</p><h4 id="accuracy-estimation-variance">Accuracy estimation variance</h4><ul><li>The reference sample is selected randomly. 我们用同样的方法抽样得到的精度数字不同？</li><li><p>Because we used a small set of sample, the result might deviate from the population estimation (accuracy of the entire map). 我们只用了一小部分</p></li><li>We can calculate this uncertainty as confidence intervals for the estimated accuracy.（置信区间）</li><li>The larger the sample size, the smaller the sampling error will be, and the more representative the sample will be of the population.（越大越精确）</li><li>Exact calculation depends on the sampling design we selected, check good practice documents.</li></ul><p>0.95+- 0.02 is standard deviation/ confidence interval for specific region of confidence</p><h4 id="machine-learning-terms-for-accuracy">Machine learning terms for accuracy</h4><p>Precision = User’s accuracy Recall = Producer’s accuracy</p><ul><li>F1 Score is the Harmonic Mean between precision and recall. The range for F1 Score is [0, 1]. » F1= 2*1/1/precision+1/recall<h4 id="continuous-variablesbiomass-soil-organic-carbon">Continuous variables(biomass, soil organic carbon)</h4><p>RMSE： Root mean square error (how much the map prediction deviates from the sample) MAE: Mean absolute error –an average absolute difference ME: Mean error – the average difference</p><h4 id="other-ways-for-map-assessment">Other ways for map assessment</h4><p>Model-based map assessment using spatially predictive models.</p></li><li>Not restricted by random sampling.</li><li>Analyze spatial correlation for each class<h2 id="model-validation">Model Validation</h2><h3 id="why-model-assessment">Why model assessment</h3><h4 id="research-objective">Research Objective:</h4></li><li>Developing /improving models (classification, regression)</li><li>Comparing models (classification, regression)<h4 id="assessment-objective">Assessment objective</h4></li><li>How good is my model for unseen data points/locations?</li><li>How good is the prediction?<h4 id="response-design-and-accuracy-estimation-protocols-are-similar-to-map-accuracy-assessment">Response design and accuracy estimation protocols are ==similar== to map accuracy assessment</h4><p>这个步骤如下，跟地图验证是一样的</p></li><li>Collecting reference data</li><li>Calculating accuracy/quality metrics<h4 id="sampling-design">Sampling design</h4></li><li>Sample-based inference is not necessary, although map assessment can also show how good your model is.</li><li>How good is your model prediction at unseen data/location?<h3 id="model-assessment-sample模型评估样本">Model assessment sample模型评估样本</h3><p>Depends on the availability of reference data. Sometimes we are not blessed to have a good and large reference dataset.</p><h4 id="order-of-preference-to-use">Order of preference to use:</h4><ol><li>Independently collected reference data</li><li>If a large sample set (divide your reference data into training and validation sets)</li><li>If a small dataset, k-fold cross-validation is an option</li><li>If a small dataset, leave-one-out ==cross-validation== (least reliable)<h5 id="cross-validation">Cross Validation</h5><p>A statistical method of evaluating and comparing learning algorithms by <strong>dividing data into two segments:</strong></p></li><li>learn or train a model</li><li>validate the model. 验证次数：5-fold validation, 10-fold validation is also common.</li></ol></li><li>Accuracy is calculated for each iteration on the validation set. 迭代计算</li><li>Average of the accuracy metrics is reported together with a variance.平均值和方差<h6 id="when-sub-setting-your-data-into-two-sets">When sub setting your data into two sets</h6><p>就是不要在同一个多边形里面划分training pixel 和validation pixel，最好分成两个多边形。</p></li></ul><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://buliangzhang24.github.io" target="_blank">Xinyi He</a></li><li>本文链接：<a href="https://buliangzhang24.github.io/2024/01/24/Advanced-Earth-Observation-9.Accuracy-Assessment/" target="_blank">https://buliangzhang24.github.io/2024/01/24/Advanced-Earth-Observation-9.Accuracy-Assessment/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"> <script src="https://giscus.app/client.js" data-repo="Buliangzhang24/Buliangzhang24.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnk5MzEyNzkxNw==" data-category="Announcements" data-category-id="DIC_kwDOBY0E7c4CRtg9" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async> </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://buliangzhang24.github.io/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://buliangzhang24.github.io/assets/search_data.json?v=1727794390', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://buliangzhang24.github.io/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2024 <span title="Xinyi He">Xinyi He</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/Buliangzhang24/Buliangzhang24.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://buliangzhang24.github.io/" title="Home" target="">Home</a></li><li> <a href="https://buliangzhang24.github.io/categories/" title="Categories" target="">Categories</a></li><li> <a href="https://buliangzhang24.github.io/archives/" title="Archives" target="">Archives</a></li><li> <a href="https://buliangzhang24.github.io/fragments/" title="Fragments" target="">Fragments</a></li><li> <a href="https://buliangzhang24.github.io/wiki/" title="Projects" target="">Projects</a></li><li> <a href="https://buliangzhang24.github.io/links/" title="Useful Links" target="">Useful Links</a></li><li> <a href="https://buliangzhang24.github.io/about/" title="About" target="">About</a></li><li><a href="https://buliangzhang24.github.io/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://buliangzhang24.github.io/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
